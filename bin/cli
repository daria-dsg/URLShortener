#!/usr/bin/env ruby

class CLI
  def login_user
    puts "Input your email:"
    @current_user = User.find_by(email: gets.chomp)

    if @current_user.nil?
      raise 'That user doen\'t exist'
    end

    nil
  end

  def create_url!
    puts 'Type in your long url'
    long_url = gets.chomp
    url = ShortenedUrl.create_for_user_and_long_url!(long_url, @current_user)

    puts "Short url is: #{url.short_url}"
    puts "Goodbye"
  end
end

@cli = CLI.new
@cli.login_user
@cli.create_url!
